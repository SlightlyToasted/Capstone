{% extends "mythic/layout.html" %}
{% load static %}

{% block body %}
    <h1>Create New Task</h1>
    <form action="{% url 'create_task' %}" method="post">
        {% csrf_token %}
        {{ form }}
        <input type="submit" value="Submit">
    </form>
    


    <h1>Tasks</h1>
    <ul class="sortable-list">
        {% for task in tasks %}
                <li class="item" draggable="true">
                    <div id="edit-task-body-{{ task.id }}" onclick="edit_task({{ task.id }})" class="details">
                        <span>
                            {{ task.description }}  <b>Due:</b> {{ task.get_datetime.due_date }}  <b>Scheduled:</b> {{ task.get_datetime.scheduled_date}}
                        </span>
                    </div>
                    
                    <div id="edit-task-form-{{ task.id }}" style="display: none;">
                        <input id="edit-task-input-{{ task.id }}" type="text">
                        <div>
                            <label for="id_due_date">Due date:</label>
                            <input type="date" name="due_date" required="" id="input-due-date-{{ task.id }}">
                        </div>
                        <div>
                            <label for="input-scheduled-date-{{ task.id }}">Scheduled date:</label>
                            <input type="date" name="scheduled_date" required="" id="input-scheduled-date-{{ task.id }}">
                        </div>
                        <button id="edit-task-btn-{{ task.id }}"  onclick="save_edit({{ task.id }})">Submit</button>    
                    </div>

                    
                </li>
        {% endfor %}
    </ul>

{% endblock %}

{% block script %}
    <script src="{% static 'mythic/create_task5.js' %}"></script>
{% endblock %}

